<div>
  <div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold text-slate-100">Gestionar Menú</h1>
    <a routerLink="/admin/menu/new" class="px-4 py-2 bg-emerald-600 text-white rounded-md hover:bg-emerald-500 text-sm font-medium transition-colors">
      Crear Plato
    </a>
  </div>

  <div class="bg-slate-900/50 rounded-lg overflow-x-auto">
    <table class="min-w-full text-left text-sm whitespace-nowrap">
      <thead class="tracking-wider border-b border-slate-700">
        <tr>
          <th scope="col" class="px-6 py-3">Imagen</th>
          <th scope="col" class="px-6 py-3">Categoría</th>
          <th scope="col" class="px-6 py-3">Nombre</th>
          <th scope="col" class="px-6 py-3">Descripción</th>
          <th scope="col" class="px-6 py-3">Precio</th>
          <th scope="col" class="px-6 py-3 text-right">Acciones</th>
        </tr>
      </thead>
      <tbody>
        @for (item of menu(); track item.id) {
          <tr class="border-b border-slate-700/50 hover:bg-slate-800/40 transition-colors">
            <td class="px-6 py-4">
              @if (item.imageUrl) {
                <img [src]="item.imageUrl" [alt]="item.name" class="h-12 w-12 object-cover rounded-md">
              } @else {
                <div class="h-12 w-12 bg-slate-700 rounded-md flex items-center justify-center text-xs text-slate-400">Sin foto</div>
              }
            </td>
            <td class="px-6 py-4 text-slate-400">{{ item.category }}</td>
            <td class="px-6 py-4 font-medium text-slate-200">{{ item.name }}</td>
            <td class="px-6 py-4 text-slate-400 truncate max-w-xs">{{ item.description }}</td>
            <td class="px-6 py-4 font-mono text-amber-400">{{ item.price | currency }}</td>
            <td class="px-6 py-4 text-right">
              <div class="flex justify-end gap-2">
                <a [routerLink]="['/admin/menu/edit', item.id]" class="px-3 py-1 bg-amber-600 text-white rounded-md hover:bg-amber-700 text-xs font-medium transition-colors">
                  Editar
                </a>
                <button (click)="requestDeletion(item)" class="px-3 py-1 bg-rose-600 text-white rounded-md hover:bg-rose-700 text-xs font-medium transition-colors">
                  Eliminar
                </button>
              </div>
            </td>
          </tr>
        } @empty {
          <tr>
            <td colspan="6" class="text-center text-slate-400 py-8">
              No hay platos registrados en el menú.
            </td>
          </tr>
        }
      </tbody>
    </table>
  </div>
</div>

<app-confirmation-modal
  [isOpen]="isDeleteModalOpen()"
  title="Confirmar Eliminación"
  [message]="'¿Estás seguro de que quieres eliminar el plato ' + (itemToDelete()?.name || '') + '? Esta acción es permanente.'"
  confirmButtonText="Sí, Eliminar Plato"
  (confirm)="confirmDeletion()"
  (close)="closeDeleteModal()">
</app-confirmation-modal>