<div>
  <a routerLink="/admin/menu" class="inline-flex items-center gap-2 text-amber-500 hover:text-amber-400 mb-6">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
    Volver a la Lista del Menú
  </a>

  <h1 class="text-3xl font-bold text-slate-100 mb-6">
    @if(isEditMode()) {
      <span>Editar Plato del Menú</span>
    } @else {
      <span>Crear Nuevo Plato</span>
    }
  </h1>

  <form (ngSubmit)="saveItem()" #menuForm="ngForm" class="space-y-6 max-w-lg">
    <div>
      <label for="name" class="block text-sm font-medium text-slate-300 mb-2">Nombre del Plato</label>
      <input type="text" id="name" name="name" [(ngModel)]="name" required
             class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500">
    </div>

    <div>
      <label for="imageUrl" class="block text-sm font-medium text-slate-300 mb-2">URL de la Imagen</label>
      <input type="url" id="imageUrl" name="imageUrl" [(ngModel)]="imageUrl"
             class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500"
             placeholder="https://ejemplo.com/imagen.jpg">
      @if (imageUrl()) {
        <div class="mt-4">
          <p class="text-sm text-slate-400 mb-2">Vista Previa:</p>
          <img [src]="imageUrl()" alt="Vista previa del plato" class="rounded-lg max-h-48 w-auto">
        </div>
      }
    </div>

    <div>
      <label for="description" class="block text-sm font-medium text-slate-300 mb-2">Descripción</label>
      <textarea id="description" name="description" [(ngModel)]="description" rows="3"
                class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500"></textarea>
    </div>
    <div class="grid grid-cols-2 gap-6">
        <div>
            <label for="price" class="block text-sm font-medium text-slate-300 mb-2">Precio</label>
            <input type="number" id="price" name="price" [(ngModel)]="price" required min="0" step="0.01"
                    class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500">
        </div>
        <div>
            <label for="category" class="block text-sm font-medium text-slate-300 mb-2">Categoría</label>
            <select id="category" name="category" [(ngModel)]="category"
                    class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500">
                @for(cat of categories; track cat) {
                    <option [value]="cat">{{ cat }}</option>
                }
            </select>
        </div>
    </div>
    
    @if (feedbackMessage()) {
      <p class="text-sm animate-fade-in" [class.text-emerald-400]="feedbackMessage()?.type === 'success'" [class.text-rose-400]="feedbackMessage()?.type === 'error'">
        {{ feedbackMessage()?.text }}
      </p>
    }

    <div class="flex justify-end gap-4 pt-4">
      <a routerLink="/admin/menu" class="px-6 py-2 bg-slate-600 text-slate-100 rounded-md hover:bg-slate-500 font-medium transition-colors">Cancelar</a>
      <button type="submit" [disabled]="!menuForm.form.valid"
              class="px-6 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 font-medium transition-colors disabled:bg-slate-500 disabled:cursor-not-allowed">
        @if(isEditMode()) {
          <span>Guardar Cambios</span>
        } @else {
          <span>Crear Plato</span>
        }
      </button>
    </div>
  </form>
</div>