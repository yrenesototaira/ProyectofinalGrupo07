<div>
  <a routerLink="/admin/users" class="inline-flex items-center gap-2 text-amber-500 hover:text-amber-400 mb-6">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
    Volver a la Lista de Usuarios
  </a>

  <h1 class="text-3xl font-bold text-slate-100 mb-6">
    @if(isEditMode()) {
      <span>Editar Usuario</span>
    } @else {
      <span>Crear Nuevo Usuario</span>
    }
  </h1>

  <form (ngSubmit)="saveUser()" #userForm="ngForm" class="space-y-6 max-w-lg">
    <div>
      <label for="name" class="block text-sm font-medium text-slate-300 mb-2">Nombre Completo</label>
      <input type="text" id="name" name="name" [(ngModel)]="name" required
             class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500">
    </div>
    <div>
      <label for="email" class="block text-sm font-medium text-slate-300 mb-2">Correo Electrónico</label>
      <input type="email" id="email" name="email" [(ngModel)]="email" required
             class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500">
    </div>
    <div>
      <label for="phone" class="block text-sm font-medium text-slate-300 mb-2">Teléfono</label>
      <input type="tel" id="phone" name="phone" [(ngModel)]="phone"
             class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500">
    </div>
    <div>
      <label for="role" class="block text-sm font-medium text-slate-300 mb-2">Rol</label>
      <select id="role" name="role" [(ngModel)]="role"
              class="w-full bg-slate-700 border-slate-600 text-slate-100 rounded-md p-3 focus:ring-amber-500 focus:border-amber-500">
        <option value="Cliente">Cliente</option>
        <option value="Administrador">Administrador</option>
      </select>
    </div>
    
    @if (feedbackMessage()) {
      <p class="text-sm animate-fade-in" [class.text-emerald-400]="feedbackMessage()?.type === 'success'" [class.text-rose-400]="feedbackMessage()?.type === 'error'">
        {{ feedbackMessage()?.text }}
      </p>
    }

    <div class="flex justify-end gap-4 pt-4">
      <a routerLink="/admin/users" class="px-6 py-2 bg-slate-600 text-slate-100 rounded-md hover:bg-slate-500 font-medium transition-colors">Cancelar</a>
      <button type="submit" [disabled]="!userForm.form.valid"
              class="px-6 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700 font-medium transition-colors disabled:bg-slate-500 disabled:cursor-not-allowed">
        @if(isEditMode()) {
          <span>Guardar Cambios</span>
        } @else {
          <span>Crear Usuario</span>
        }
      </button>
    </div>
  </form>
</div>